(function(g){var window=this;'use strict';var ILj=function(r,l){if(!Number.isFinite(r))return String(r);r=String(r);var U=r.indexOf(".");U===-1&&(U=r.length);var F=r[0]==="-"?"-":"";F&&(r=r.substring(1));return F+(0,g.k3R)("0",Math.max(0,l-U))+r},kDj=function(){return{Z:"svg",
J:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},B:[{Z:"path",J:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}}]}},oqG=function(){return{Z:"svg",
J:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},B:[{Z:"path",J:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]}},$YC=function(r){typeof r==="number"?(this.date=rDb(r,0,1),ZZ(this,1)):g.oY(r)?(this.date=rDb(r.getFullYear(),r.getMonth(),r.getDate()),ZZ(this,r.getDate())):(this.date=new Date(g.Y0()),r=this.date.getDate(),
this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0),this.date.setMilliseconds(0),ZZ(this,r))},rDb=function(r,l,U){l=new Date(r,l,U);
r>=0&&r<100&&l.setFullYear(l.getFullYear()-1900);return l},ZZ=function(r,l){r.getDate()!=l&&r.date.setUTCHours(r.date.getUTCHours()+(r.getDate()<l?1:-1))},Rs=function(r,l){g.I4.call(this,r,{Z:"div",
S:"ytp-reminder-menu",J:{role:"menu",tabindex:"-1"},B:[{Z:"div",S:"ytp-reminder-menu-contents",B:[{Z:"div",S:"ytp-reminder-menu-items"}]}]},100,!0);this.W=l;this.L=[];this.menuPopupRenderer=void 0;this.items=this.Zz("ytp-reminder-menu-items");this.hide()},lhR=function(r){return(r.menuPopupRenderer&&r.menuPopupRenderer.items||[]).reduce(function(l,U){U&&U.menuServiceItemRenderer&&l.push(U.menuServiceItemRenderer);
return l},[])},hr=function(r){g.p.call(this,{Z:"div",
B:[{Z:"button",Dz:["ytp-offline-slate-button","ytp-button"],B:[{Z:"div",S:"ytp-offline-slate-button-icon",XT:"{{icon}}"},{Z:"div",S:"ytp-offline-slate-button-text",XT:"{{text}}"}]}]});this.C=r;this.upcomingEventReminderButtonRenderer=this.toggleButtonRenderer=null;this.X=void 0;this.K=this.W=null;(this.D=this.Zz("ytp-offline-slate-button"))&&this.G(this.D,"click",this.j);this.hide()},Fw8=function(r,l,U){!r.toggleButtonRenderer&&l&&l.toggleButtonRenderer?r.toggleButtonRenderer=l.toggleButtonRenderer:
l&&l.toggleButtonRenderer||(r.toggleButtonRenderer=null);
!r.upcomingEventReminderButtonRenderer&&U&&g.V(U,UYq)?r.upcomingEventReminderButtonRenderer=g.V(U,UYq):U&&g.V(U,UYq)||(r.upcomingEventReminderButtonRenderer=null);n_(r)},n_=function(r){if(r.toggleButtonRenderer){var l=r.toggleButtonRenderer;
if(l.isToggled){var U=l.toggledText?g.Xv(l.toggledText):"";r.update({text:U,icon:YtR(l.toggledIcon)})}else U=l.defaultText?g.Xv(l.defaultText):"",r.update({text:U,icon:YtR(l.defaultIcon)});r.show()}else r.upcomingEventReminderButtonRenderer?(l=elC(r))?(U=l.text?g.Xv(l.text):"",r.update({text:U,icon:YtR(l.icon)}),r.show()):r.hide():r.hide()},OB$=function(r,l,U){r.K||(r.K=new g.d5(r.C.N().c_));
var F={context:g.Wg(r.K.config_||g.xD())};g.Bh()&&(F.context.clientScreenNonce=g.Bh());F.params=U;g.OF(r.K,l,F,{timeout:5E3,onSuccess:function(){r.upcomingEventReminderButtonRenderer&&r.X&&(r.upcomingEventReminderButtonRenderer.currentState=r.X,r.X=void 0)},
onError:function(){dY$(r)},
onTimeout:function(){dY$(r)}})},dY$=function(r){r.toggleButtonRenderer?(r.toggleButtonRenderer.isToggled=!r.toggleButtonRenderer.isToggled,n_(r)):r.upcomingEventReminderButtonRenderer&&(r.X=void 0,n_(r))},YtR=function(r){if(!r)return null;
switch(r.iconType){case "NOTIFICATIONS":return kDj();case "NOTIFICATIONS_NONE":return oqG();case "NOTIFICATIONS_ACTIVE":return g.BV();default:return null}},elC=function(r){if(!r.upcomingEventReminderButtonRenderer)return null;
var l=r.X||r.upcomingEventReminderButtonRenderer.currentState;r=g.Q(r.upcomingEventReminderButtonRenderer.states||[]);for(var U=r.next();!U.done;U=r.next())if((U=g.V(U.value,KwY))&&U.state===l&&U.button&&g.V(U.button,g.kL))return g.V(U.button,g.kL);return null},CSC=function(r){g.p.call(this,{Z:"div",
S:"ytp-offline-slate",B:[{Z:"div",S:"ytp-offline-slate-background"},{Z:"div",S:"ytp-offline-slate-bar",B:[{Z:"span",S:"ytp-offline-slate-icon",B:[{Z:"svg",J:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},B:[{Z:"path",J:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{Z:"circle",J:{cx:"12",cy:"12",r:"3"}}]}]},{Z:"span",S:"ytp-offline-slate-messages",B:[{Z:"div",S:"ytp-offline-slate-main-text",J:{"aria-label":"{{label}}"},XT:"{{mainText}}"},{Z:"div",S:"ytp-offline-slate-subtitle-text",XT:"{{subtitleText}}"}]},{Z:"span",S:"ytp-offline-slate-buttons"}]},{Z:"button",Dz:["ytp-offline-slate-close-button","ytp-button"],B:[g.jl()]},{Z:"button",Dz:["ytp-offline-slate-open-button","ytp-button"],B:[g.NP()]}]});var l=this;this.api=r;this.W=this.X=null;this.background=this.Zz("ytp-offline-slate-background");
this.L=this.Zz("ytp-offline-slate-bar");this.D=new g.F1(function(){g.Pl(l.L,"ytp-offline-slate-bar-fade")},15E3);
this.j=!1;this.K=new g.F1(function(){g.Pl(l.element,"ytp-offline-slate-collapsed")},15E3);
g.w(this,this.K);g.w(this,this.D);this.countdownTimer=new g.F1(this.EU,1E3,this);this.G(r,"presentingplayerstatechange",this.cE);this.G(r,"livestatedata",this.Sc);this.G(this.Zz("ytp-offline-slate-close-button"),"click",function(){g.Pl(l.element,"ytp-offline-slate-collapsed")});
this.G(this.Zz("ytp-offline-slate-open-button"),"click",function(){g.M0(l.element,"ytp-offline-slate-collapsed")});
this.hide();r=this.getVideoData();r.getPlayerResponse()&&(r=r.getPlayerResponse().playabilityStatus)&&this.Sc(r);r=this.api.getPresentingPlayerType()===8&&!this.getVideoData().hG;var U=this.api.getPresentingPlayerType()===8;g.xl(this.element,"ytp-offline-slate-premiere-trailer",r);g.xl(this.element,"ytp-offline-slate-hide-background",U)},vqr=function(r,l,U){if(l){var F=l.subtitleText!=null?g.Xv(l.subtitleText):"";
U=U?U:l.mainText!=null?g.Xv(l.mainText):"";var Y,e,d,K;l=(K=(Y=l.mainText)==null?void 0:(e=Y.accessibility)==null?void 0:(d=e.accessibilityData)==null?void 0:d.label)!=null?K:U;r.update({mainText:U,subtitleText:F,label:l});g.xl(r.element,"ytp-offline-slate-single-text-line",!F);g.xl(r.L,"ytp-offline-slate-bar-hidden",!U&&!F)}},Gf=function(r,l){var U=(0,g.f)();
this.trigger=r;this.W=l;this.L=U},siR=function(r){g.Rf.call(this,r);
var l=this;this.j=!1;this.T=0;this.U=!1;this.X=new g.F1(function(){JD8(l)},0);
this.W=this.heartbeatParams=null;this.K=!1;this.D=new g.Se(1E3,6E4,1);this.sequenceNumber=0;this.offlineSlate=null;this.kN=new g.d5(void 0);this.attestationResponse=Promise.resolve(void 0);this.V=Promise.resolve(void 0);this.utcOffsetMinutes=-(new $YC).getTimezoneOffset();this.L=new g.Lg(this);g.w(this,this.X);g.w(this,this.L);mYY(this);PS0(this);this.L.G(r,"heartbeatparams",this.I5);this.L.G(r,"presentingplayerstatechange",this.XX);this.L.G(r,"videoplayerreset",this.R4);this.L.G(r,g.x1("heartbeat"),
this.onCueRangeEnter);this.K&&this.W&&ADY(this,void 0,this.W);var U=new g.M2(1E3,0x7ffffffffffff,{priority:1,namespace:"heartbeat"}),F=new g.M2(0x8000000000000,0x8000000000000,{id:"stream_end",priority:1,namespace:"heartbeat"});r.sN([U,F]);MVq(this)},MVq=function(r){var l=r.getVideoData();
!l.Y("use_rta_for_player")&&l.J2&&(l=l.botguardData)&&g.rz(l,r.player.N())},xYp=function(r){var l,U;
return g.y(function(F){if(F.X==1)return g.T(F,g.T5B(),2);if(!F.W)return r.sequenceNumber>=3?F.return({error:"ATTESTATION_ERROR_VM_INTERNAL_ERROR"}):F.return(void 0);l=r.getVideoData();U={};return F.return(g.qFf((U.cpn=l.clientPlaybackNonce,U.encryptedVideoId=l.videoId||"",U),1500))})},mYY=function(r){var l=r.getVideoData();
if(l.J2)if(l.Y("use_rta_for_player"))r.attestationResponse=xYp(r);else if(l=new g.fC4(l),g.IZ.isInitialized()||r.sequenceNumber>=3){var U=Promise,F=U.resolve,Y=null;if(l.videoData.Fo){var e=g.S7B(l);if(e){Y={};var d={};e=e.split("&");e=g.Q(e);for(var K=e.next();!K.done;K=e.next())K=K.value.split("="),K.length===2&&(d[K[0]]=K[1]);d.r1a&&(Y.webResponse=d.r1a);d.r1c&&(Y.error=WwG[Number(d.r1c)]);Y.challenge=l.videoData.Fo}}r.attestationResponse=F.call(U,Y||void 0)}},Qi0=function(r){var l=r.getVideoData();
if(!g.Nl(r.getVideoData())||l.oL)return!1;if(l.U){r=l.U.flavor==="playready"&&l.Y("html5_innertube_heartbeats_for_playready");var U=l.U.flavor==="widevine"&&l.Y("html5_innertube_heartbeats_for_widevine");l=g.YB(l.U)&&l.Y("html5_innertube_heartbeats_for_fairplay");return!(r||U||l)}return!0},Eqq=function(r){if(Qi0(r))return!!r.heartbeatParams;
var l=r.getVideoData();return!g.Nl(r.getVideoData())||l.zE||l.g$?!!l.heartbeatToken:!1},XE=function(r,l){if(!r.X.isActive()&&r.j){var U=r.getVideoData();
if(Eqq(r)||U.isLivePlayback){if(l===void 0)if(r.U)if(r.K)l=7500;else{var F;l=((F=r.heartbeatParams)==null?0:F.interval)?r.heartbeatParams.interval*1E3:r.getVideoData().hJ||6E4}else l=1E3;r.X.start(l)}}},nq$=function(r,l,U){l.Hs&&(U=g.jD(U,{internalipoverride:l.Hs}));
var F={cpn:l.clientPlaybackNonce};l.contextParams&&(F.context_params=l.contextParams);l.MS&&(F.kpt=l.MS);U=g.jD(U,F);g.Tj(U,{format:"RAW",method:"GET",timeout:3E4,onSuccess:function(Y){if(!r.X.isActive()&&io(r)){r.D.reset();r.sequenceNumber++;Y=Y.responseText;var e=ZBC(Y);if(e){r.player.PQ("onHeartbeat",e);var d=e.status==="ok"?e.stop_heartbeat?2:0:e.status==="stop"?1:e.status==="live_stream_offline"?0:-1}else d=(d=Y.match(Rlf))?d[1]==="0"?0:1:-1;hlf(r,void 0,e,Y,d)}},
onError:function(Y){io(r)&&bo(r,!0,"net-"+Y.status)},
onTimeout:function(){io(r)&&bo(r,!0,"timeout")},
withCredentials:!0})},JD8=function(r){var l,U;
g.y(function(F){l=r.player.N();U=r.getVideoData();if(!io(r))return F.return();if(Qi0(r))return G9Y(r,l,U),F.FT(0);mYY(r);return g.T(F,X78(r,l,U),0)})},G9Y=function(r,l,U){var F;
if((F=r.heartbeatParams)!=null&&F.url){var Y=g.jD(r.heartbeatParams.url,{request_id:g.Gj3()});U.rz&&(Y=g.jD(Y,{vvt:U.rz}),U.mdxEnvironment&&(Y=g.jD(Y,{mdx_environment:U.mdxEnvironment})));g.MN(l,U.oauthToken).then(function(e){e&&(Y=g.jD(Y,{access_token:e}));nq$(r,U,Y)})}},io=function(r){var l=r.getVideoData();
return r.player.getPresentingPlayerType()===3||g.c(r.player.getPlayerStateObject(r.getPlayerType()),4)?!1:Eqq(r)||l.isLivePlayback?!0:(NW(r),!1)},X78=function(r,l,U){var F,Y,e,d,K,C,v,J,m,P,A,M,E,Z,n,h,N,u,D,t;
return g.y(function(z){if(z.X==1)return F="player/heartbeat",e={videoId:U.videoId,sequenceNumber:r.sequenceNumber,heartbeatServerData:(Y=r.sF)!=null?Y:U.heartbeatServerData},r.V=r.attestationResponse,U.J2?g.T(z,r.V,3):z.FT(2);z.X!=2&&(e.attestationResponse=z.W);d=g.AI(U);C=(K=d.client)!=null?K:{};C.utcOffsetMinutes=r.utcOffsetMinutes;e.context=d;e.cpn=U.clientPlaybackNonce;if(v=typeof Intl!=="undefined"?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)C.timeZone=v;J={heartbeatChecks:[]};
if(m=U.getPlayerResponse())U.heartbeatToken&&(e.heartbeatToken=U.heartbeatToken),(P=m.playabilityStatus)&&(A=P.liveStreamability)&&A.liveStreamabilityRenderer&&J.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS");U.heartbeatToken&&J.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.g1(l)&&(J.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),M=iB8(r),E={},M!==null&&(E.clientPlayerPositionUtcMillis=M),n=(Z=r.player.FL())==null?void 0:g.Ti(Z),N=((h=n)==null?void 0:h.freePreviewWatchedDuration)||
0,N>0&&(E.freePreviewWatchedDuration={seconds:""+N}),J.unpluggedParams=E);e.heartbeatRequestParams=J;U.isLivePlayback?(u=iB8(r),u!==null&&(e.playbackState||(e.playbackState={}),e.playbackState.playbackPosition={utcTimeMillis:u})):l.Y("enable_heartbeat_vod_playback_position")&&(D=bBC(r),D!==null&&(e.playbackState||(e.playbackState={}),e.playbackState.playbackPosition={streamTimeMillis:D}));r.player.publish("heartbeatRequest",e);t={timeout:3E4,onSuccess:function(I){if(!r.X.isActive()&&io(r)){var U4=
r.getVideoData(),$$=U4.J2&&r.V==null,Y$;U4.J2=!((Y$=I.heartbeatAttestationConfig)==null||!Y$.requiresAttestation)||$$;$$=I.playabilityStatus;Y$=JSON.stringify($$)||"{}";I.authenticationMismatch&&r.player.pP("authshear",{});var L=-1;var Ae=I.playabilityStatus;Ae&&(r.player.PQ("onHeartbeat",Ae),Ae.status==="OK"?L=I.stopHeartbeat?2:0:Ae.status==="UNPLAYABLE"?L=1:Ae.status==="LIVE_STREAM_OFFLINE"&&(L=0));r.sequenceNumber&&L===-1||r.D.reset();r.sequenceNumber++;I.heartbeatServerData&&(r.sF=I.heartbeatServerData);
U4.m5=I;(Ae=I.playerCueRangeSet)&&g.dv(U4,Ae);I.playerCueRanges&&I.playerCueRanges.length>0&&(U4.cueRanges=I.playerCueRanges);var G3,z3;((G3=I.progressBarConfig)==null?0:G3.progressBarStartPosition)&&((z3=I.progressBarConfig)==null?0:z3.progressBarEndPosition)&&(U4.progressBarStartPosition=I.progressBarConfig.progressBarStartPosition,U4.progressBarEndPosition=I.progressBarConfig.progressBarEndPosition);U4.compositeLiveIngestionOffsetToken=I.compositeLiveIngestionOffsetToken;I.compositeLiveStatusToken!==
U4.compositeLiveStatusToken&&(U4.compositeLiveStatusToken=I.compositeLiveStatusToken);U4.publish("dataupdated");hlf(r,I,$$,Y$,L)}},
onError:function(I){io(r)&&bo(r,!0,"net-"+I.status)},
onTimeout:function(){io(r)&&bo(r,!0,"timeout")}};
g.MN(l,g.ax(U)).then(function(I){I&&(t.Ac="Bearer "+I);g.OF(r.kN,F,e,t)});
g.Wm(z)})},hlf=function(r,l,U,F,Y){Y===-1?(U="decode "+g.ej(F,3),bo(r,!1,U)):Y===2?(NW(r),r.U=!0):(r.T=0,r.X.stop(),Y===1?(r.U=!1,U&&U.errorCode==="PLAYABILITY_ERROR_CODE_EMBARGOED"&&r.player.v_(!0),Y="pe."+(U==null?void 0:U.errorCode)+";ps."+(U==null?void 0:U.status),r.player.qs("heartbeat.stop",2,r.Lx(F),Y),g.xC("heartbeatActionPlayerHalted",NGY(U)),(l==null?0:l.videoTransitionEndpoint)&&U&&(l=l.videoTransitionEndpoint,(F=g.V(l,g.Kk))&&ji8(r,F,U,{itct:l==null?void 0:l.clickTrackingParams}))):(r.U=
!0,F=0,r.K&&U&&(F=ADY(r,l,U),r.player.publish("livestatedata",U)),F?XE(r,F):XE(r)))},ADY=function(r,l,U){var F=U.liveStreamability&&U.liveStreamability.liveStreamabilityRenderer,Y=!(!F||!(F.switchStreamsImmediately||F.transitionTiming&&F.transitionTiming==="STREAM_TRANSITION_TIMING_IMMEDIATELY"));
l=qtp(r,l,F);var e=r.getVideoData(),d=r.player.getPlayerStateObject(r.getPlayerType()),K=d.isPlaying()&&!g.HZ(e)&&!r.player.isAtLiveHead(r.getPlayerType());if(e.N().jN()){var C,v=((C=r.player.dh())==null?void 0:C.gR())||{};v.status=U.status||"";v.dvr=""+ +K;v["switch"]=""+ +Y;v.ended=""+ +!(!F||!F.displayEndscreen);r.player.pP("heartbeat",v)}C=r.player.Y("always_cache_redirect_endpoint");if(K&&!Y&&!C)return l;v=F&&F.streamTransitionEndpoint&&g.V(F.streamTransitionEndpoint,g.Kk);var J=F&&F.transitionTiming;
if(J==="STREAM_TRANSITION_TIMING_AT_STREAM_END")r.getVideoData().transitionEndpointAtEndOfStream=v;else if(C&&!v&&r.getVideoData().transitionEndpointAtEndOfStream)r.getVideoData().transitionEndpointAtEndOfStream=void 0;else if(!C&&v&&ji8(r,v,U))return l;if(K&&!Y&&C||C&&v&&(J==="STREAM_TRANSITION_TIMING_IMMEDIATELY"||J==="STREAM_TRANSITION_TIMING_UNSPECIFIED")&&ji8(r,v,U))return l;if(U.status.toUpperCase()==="OK"){Y=F&&F.broadcastId;K=r.W&&r.W.liveStreamability&&r.W.liveStreamability.liveStreamabilityRenderer&&
r.W.liveStreamability.liveStreamabilityRenderer.broadcastId;C=Y!==K&&Y!=null;if(!g.u9(e)||C){var m={video_id:e.videoId};e.R3&&(m.is_live_destination="1");m.disable_watch_next=!0;m.raw_watch_next_response=e.getWatchNextResponse();m.autonav_state=e.autonavState;m.oauth_token=e.oauthToken;m.ew=e.ew;e.D&&(m.vss_credentials_token=e.D,m.vss_credentials_token_type=e.Nr);e.rz&&(m.vvt=e.rz);F=void 0;g.u9(e)?C&&(F=new Gf("broadcastIdChanged",K+","+Y),r.W2("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_BROADCAST_ID_CHANGED",
U)):(Y&&(F=new Gf("formatsReceived",""+Y)),r.W2("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_LIVE_STREAM_WENT_ONLINE",U));r.player.loadVideoByPlayerVars(m,void 0,void 0,void 0,F);return l}r.player.kM("heartbeat",r.getPlayerType())}F&&F.displayEndscreen&&(r.offlineSlate?(r=r.offlineSlate,r.j=!0,r.H5&&r.api.Y8()):d.isBuffering()&&(e=((m=r.player.dh())==null?void 0:m.gR())||{},r.player.pP("hbse",e,!0),r.player.Y8(),r.player.PQ("onLiveMediaEnded",U)));return l},qtp=function(r,
l,U){return r.player.Y("web_player_use_heartbeat_poll_delay_ms")&&(r=Number(l==null?void 0:l.pollDelayMs))?r:(U=Number(U==null?void 0:U.pollDelayMs))?U:0},bo=function(r,l,U){if(!r.X.isActive()){r.X.stop();
r.T++;var F=l?"heartbeat.net":"heartbeat.servererror";var Y=r.getVideoData();if(Y.aO||l&&!g.Nl(r.getVideoData())&&!Eqq(r)&&Y.isLivePlayback)Y=!1;else{var e,d;((d=r.heartbeatParams)==null?0:d.retries)?e=r.heartbeatParams.retries:e=Y.FC||5;Y=r.T>=e}Y?(g.xC("heartbeatActionPlayerHalted",l?{enforcedPolicyToHaltOnNetworkFailure:!0}:NGY()),(l=r.getVideoData())&&l.isLivePlayback?r.player.qs(F,1,"Video playback interrupted. Please try again.",U):r.player.qs(F,1,"Sorry, there was an error while licensing this video.",
U)):(XE(r,r.D.getValue()),g.z$(r.D))}},NGY=function(r){var l={enforcedPolicyToHaltOnNetworkFailure:!1};
r&&(l.serializedServerContext=r.additionalLoggingData);return l},NW=function(r){r.T=0;
r.X.stop();r.U=!1;r.sequenceNumber=0},PS0=function(r){var l=r.getVideoData(),U=r.player.N();
if(l.isLivePlayback)if(g.sG(U.U)){r.K=!0;r.j=!0;if(!g.DC(U)||g.g1(U))r.offlineSlate=new CSC(r.player),g.w(r,r.offlineSlate),g.Sg(r.player,r.offlineSlate.element,4);(l=l.getPlayerResponse())&&l.playabilityStatus&&(r.W=l.playabilityStatus);var F;((F=r.W)==null?void 0:F.status)!=="UNPLAYABLE"&&(r.W?(F=qtp(r,void 0,r.W.liveStreamability&&r.W.liveStreamability.liveStreamabilityRenderer))?XE(r,F):XE(r,7500):XE(r,1E3))}else r.player.qs("html5.unsupportedlive",2,"HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1");
else g.Af(l.sF,"heartbeat")&&r.player.kM("heartbeat",r.getPlayerType())},ji8=function(r,l,U,F){var Y=l&&l.videoId;
return Y?(r.player.zI(Y,Object.assign({},{autonav:"1"},F||{}),void 0,!0,!0,l,g.ax(r.getVideoData())),r.W2("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT",U),!0):!1},iB8=function(r){return(r=r.player.getProgressState(r.getPlayerType()).ingestionTime)&&isFinite(r)?""+Math.floor(r*1E3):null},bBC=function(r){return(r=r.player.getCurrentTime(r.getPlayerType()))&&isFinite(r)?""+Math.floor(r*1E3):null},ZBC=function(r){try{var l=JSON.parse(r);
return l!=null?l:void 0}catch(U){}},TGq={ERAS:["BC",
"AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, y",
"MMMM d, y","MMM d, y","M/d/yy"],TIMEFORMATS:["h:mm:ss\u202fa zzzz","h:mm:ss\u202fa z","h:mm:ss\u202fa","h:mm\u202fa"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:6,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:5};
TGq={ERAS:["BC","AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["am","pm"],DATEFORMATS:["EEEE, d MMMM y",
"d MMMM y","d MMM y","dd/MM/y"],TIMEFORMATS:["HH:mm:ss zzzz","HH:mm:ss z","HH:mm:ss","HH:mm"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:0,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:3};
var WwG=["ATTESTATION_ERROR_UNKNOWN","ATTESTATION_ERROR_VM_NOT_INITIALIZED","ATTESTATION_ERROR_VM_NO_RESPONSE","ATTESTATION_ERROR_VM_TIMEOUT","ATTESTATION_ERROR_VM_INTERNAL_ERROR"],u98={300:"STREAMING_DEVICES_QUOTA_PER_24H_EXCEEDED",301:"ALREADY_PINNED_ON_A_DEVICE",303:"STOPPED_BY_ANOTHER_PLAYBACK",304:"TOO_MANY_STREAMS_PER_USER",305:"TOO_MANY_STREAMS_PER_ENTITLEMENT",400:"VIDEO_NOT_FOUND",401:"GEO_FAILURE",402:"STREAMING_NOT_ALLOWED",403:"UNSUPPORTED_DEVICE",405:"VIDEO_FORBIDDEN",500:"PURCHASE_NOT_FOUND",
501:"RENTAL_EXPIRED",502:"PURCHASE_REFUNDED",5E3:"BAD_REQUEST",5001:"CGI_PARAMS_MISSING",5002:"CGI_PARAMS_MALFORMED",5100:"AUTHENTICATION_MISSING",5101:"AUTHENTICATION_MALFORMED",5102:"AUTHENTICATION_EXPIRED",5200:"CAST_TOKEN_MALFORMED",5201:"CAST_TOKEN_EXPIRED",5202:"CAST_TOKEN_FAILED",5203:"CAST_SESSION_VIDEO_MISMATCHED",5204:"CAST_SESSION_DEVICE_MISMATCHED",6E3:"INVALID_DRM_MESSAGE",7E3:"SERVER_ERROR",8E3:"RETRYABLE_ERROR"};g.x=$YC.prototype;g.x.Jm=TGq.FIRSTDAYOFWEEK;g.x.P1=TGq.FIRSTWEEKCUTOFFDAY;
g.x.clone=function(){var r=new $YC(this.date);r.Jm=this.Jm;r.P1=this.P1;return r};
g.x.getFullYear=function(){return this.date.getFullYear()};
g.x.getYear=function(){return this.getFullYear()};
g.x.getMonth=function(){return this.date.getMonth()};
g.x.getDate=function(){return this.date.getDate()};
g.x.getTime=function(){return this.date.getTime()};
g.x.getDay=function(){return this.date.getDay()};
g.x.getUTCFullYear=function(){return this.date.getUTCFullYear()};
g.x.getUTCMonth=function(){return this.date.getUTCMonth()};
g.x.getUTCDate=function(){return this.date.getUTCDate()};
g.x.getUTCDay=function(){return this.date.getDay()};
g.x.getUTCHours=function(){return this.date.getUTCHours()};
g.x.getUTCMinutes=function(){return this.date.getUTCMinutes()};
g.x.getTimezoneOffset=function(){return this.date.getTimezoneOffset()};
g.x.set=function(r){this.date=new Date(r.getFullYear(),r.getMonth(),r.getDate())};
g.x.setFullYear=function(r){this.date.setFullYear(r)};
g.x.setYear=function(r){this.setFullYear(r)};
g.x.setMonth=function(r){this.date.setMonth(r)};
g.x.setDate=function(r){this.date.setDate(r)};
g.x.setTime=function(r){this.date.setTime(r)};
g.x.setUTCFullYear=function(r){this.date.setUTCFullYear(r)};
g.x.setUTCMonth=function(r){this.date.setUTCMonth(r)};
g.x.setUTCDate=function(r){this.date.setUTCDate(r)};
g.x.add=function(r){if(r.years||r.months){var l=this.getMonth()+r.months+r.years*12,U=this.getYear()+Math.floor(l/12);l%=12;l<0&&(l+=12);a:{switch(l){case 1:var F=U%4!=0||U%100==0&&U%400!=0?28:29;break a;case 5:case 8:case 10:case 3:F=30;break a}F=31}F=Math.min(F,this.getDate());this.setDate(1);this.setFullYear(U);this.setMonth(l);this.setDate(F)}r.days&&(U=this.getYear(),l=U>=0&&U<=99?-1900:0,r=new Date((new Date(U,this.getMonth(),this.getDate(),12)).getTime()+r.days*864E5),this.setDate(1),this.setFullYear(r.getFullYear()+
l),this.setMonth(r.getMonth()),this.setDate(r.getDate()),ZZ(this,r.getDate()))};
g.x.equals=function(r){return!(!r||this.getYear()!=r.getYear()||this.getMonth()!=r.getMonth()||this.getDate()!=r.getDate())};
g.x.toString=function(){var r=this.getFullYear(),l=r<0?"-":r>=1E4?"+":"";return[l+ILj(Math.abs(r),l?6:4),ILj(this.getMonth()+1,2),ILj(this.getDate(),2)].join("")+""};
g.x.valueOf=function(){return this.date.valueOf()};var yDr=new g.uj("addUpcomingEventReminderEndpoint");var BG$=new g.uj("removeUpcomingEventReminderEndpoint");var HBY=new g.uj("updateUpcomingEventReminderButtonStateCommand");var UYq=new g.uj("upcomingEventReminderButtonRenderer"),KwY=new g.uj("upcomingEventReminderButtonStateRenderer");g.W(Rs,g.I4);
Rs.prototype.updateMenuItems=function(){var r=this,l=lhR(this),U=0;U=0;for(var F={};U<l.length;F={L8:void 0},U++){var Y=this.L[U];Y||(Y=new g.p({Z:"div",S:"ytp-reminder-menu-item",J:{role:"menuitem",tabindex:"0"},B:[{Z:"div",S:"ytp-reminder-menu-item-icon",XT:"{{icon}}"},{Z:"div",S:"ytp-reminder-menu-item-label",XT:"{{text}}"}]}),F.L8=U,Y.listen("click",function(d){return function(){var K=d.L8;r.UL();K=lhR(r)[K];r.publish("reminderMenuItemClicked",K.serviceEndpoint||K.command)}}(F)),Y.CP(this.items),
this.L[U]=Y);
var e=l[U];F=null;switch(e.icon&&e.icon.iconType){case "NOTIFICATIONS":F=kDj();break;case "NOTIFICATIONS_NONE":F=oqG();break;case "NOTIFICATIONS_ACTIVE":F=g.BV()}e=e.text?g.Xv(e.text):"";Y.update({icon:F,text:e})}for(;U<this.L.length;)this.L.pop().dispose();U===0?this.UL():this.yZ(this.W)};
Rs.prototype.hide=function(){this.W&&this.W.removeAttribute("aria-haspopup");g.I4.prototype.hide.call(this)};
Rs.prototype.show=function(){this.W&&this.W.setAttribute("aria-haspopup","true");g.I4.prototype.show.call(this)};
Rs.prototype.Rf=function(){g.xY(this.L);g.I4.prototype.Rf.call(this)};g.W(hr,g.p);
hr.prototype.j=function(){if(this.toggleButtonRenderer){var r=this.toggleButtonRenderer;r.isToggled?this.L(r.toggledServiceEndpoint):this.L(r.defaultServiceEndpoint);r.isToggled=!r.isToggled;n_(this)}else if(this.upcomingEventReminderButtonRenderer)if(this.W&&this.W.H5)this.W.UL();else{var l=elC(this);l&&this.L(l.serviceEndpoint||l.command);l=((r=g.V(l==null?void 0:l.command,g.bH))==null?void 0:r.commands)||[];a:{r=g.Q(l);for(var U=r.next();!U.done;U=r.next()){var F=l=void 0;if(U=(l=g.V(U.value,g.e0Y))==
null?void 0:(F=l.popup)==null?void 0:F.menuPopupRenderer){r=U;break a}}r=void 0}this.W||(this.W=new Rs(this.C,this.D),this.W.CP(this.element),g.w(this,this.W),this.W.subscribe("reminderMenuItemClicked",this.L,this));l=this.W;l.menuPopupRenderer=r;l.updateMenuItems()}};
hr.prototype.L=function(r){var l=g.V(r,yDr),U=g.V(r,BG$);if(r&&(l||U)){if(l){var F=l;var Y="notification/add_upcoming_event_reminder"}else U&&(F=U,Y="notification/remove_upcoming_event_reminder");if(Y&&F&&F.params)for(OB$(this,Y,F.params),r=g.Q(F.commands||[]),l=r.next();!l.done;l=r.next())if((l=l.value)&&g.V(l,HBY)){this.X=g.V(l,HBY).state;n_(this);break}}};g.W(CSC,g.p);g.x=CSC.prototype;g.x.getPlayerType=function(){if(this.api.getPresentingPlayerType()===8)return 1};
g.x.getVideoData=function(){return this.api.getVideoData(this.getPlayerType())};
g.x.Sc=function(r){var l,U,F=r==null?void 0:(l=r.liveStreamability)==null?void 0:(U=l.liveStreamabilityRenderer)==null?void 0:U.offlineSlate;if(F){this.X=r;l=F.liveStreamOfflineSlateRenderer;l.canShowCountdown?this.EU():vqr(this,l);var Y,e,d,K;if(U=r==null?void 0:(Y=r.liveStreamability)==null?void 0:(e=Y.liveStreamabilityRenderer)==null?void 0:(d=e.offlineSlate)==null?void 0:(K=d.liveStreamOfflineSlateRenderer)==null?void 0:K.thumbnail){Y=0;e=null;d=U.thumbnails;for(K=0;K<d.length;K++)d[K].width>
Y&&(Y=d[K].width||0,e=d[K].url);e&&(this.background.style.backgroundImage="url("+e+")")}else this.background.style.backgroundImage="";l.actionButtons||l.reminderButton?(this.W||(this.W=new hr(this.api),this.W.CP(this.Zz("ytp-offline-slate-buttons")),g.w(this,this.W)),Fw8(this.W,l.actionButtons&&l.actionButtons[0],l.reminderButton)):this.W&&Fw8(this.W,null,null);this.X=r}else this.X=null;this.cE()};
g.x.cE=function(r){if(this.api.getPresentingPlayerType()===8)var l=!0;else{var U=this.api.getPlayerStateObject(),F=this.getVideoData();l=F.isLivePlayback&&(U.isBuffering()||g.c(U,2)||g.c(U,64));var Y=F.autonavState===2&&g.c(U,2);U=U.isPlaying()&&!g.HZ(F)&&!this.api.isAtLiveHead(void 0,!0);l=l&&!U&&!Y}l&&this.X?this.H5?(r==null?0:g.Xr(r,2))&&!this.getVideoData().hG&&(g.M0(this.element,"ytp-offline-slate-collapsed"),this.K.stop(),g.M0(this.L,"ytp-offline-slate-bar-fade"),this.D.start()):(this.show(),
this.K.start(),this.api.publish("offlineslatestatechange"),this.j&&this.api.Y8()):this.H5&&(this.hide(),this.api.publish("offlineslatestatechange"))};
g.x.EU=function(){var r,l,U,F,Y=(r=this.X)==null?void 0:(l=r.liveStreamability)==null?void 0:(U=l.liveStreamabilityRenderer)==null?void 0:(F=U.offlineSlate)==null?void 0:F.liveStreamOfflineSlateRenderer;Y&&(r=Math.floor(g.Y0()/1E3),l=Y.canShowCountdown&&Number(Y.scheduledStartTime),!l||l<=r?(vqr(this,Y),this.countdownTimer.stop()):(vqr(this,Y,g.B5(l-r)),g.Yl(this.countdownTimer)))};
g.x.Rf=function(){this.countdownTimer.dispose();this.countdownTimer=null;g.p.prototype.Rf.call(this)};Gf.prototype.X=function(r){return this.trigger&&r.trigger?this.trigger===r.trigger&&this.W===r.W:!1};
Gf.prototype.isExpired=function(){return(0,g.f)()-this.L>6E4};
Gf.prototype.toString=function(){return"heartbeat:"+this.trigger+":"+this.W};g.W(siR,g.Rf);g.x=siR.prototype;g.x.Rf=function(){NW(this);this.player.MB("heartbeat");g.Rf.prototype.Rf.call(this)};
g.x.onCueRangeEnter=function(){this.j=!0;XE(this,2E3)};
g.x.I5=function(r){this.heartbeatParams=r;XE(this,2E3)};
g.x.XX=function(r){var l;this.player.getPresentingPlayerType()!==8&&((l=this.W)==null?void 0:l.status)!=="UNPLAYABLE"&&(g.c(r.state,2)||g.c(r.state,64)?(NW(this),this.K&&(this.j=!0,XE(this,1E3))):(g.c(r.state,1)||g.c(r.state,8))&&XE(this,2E3))};
g.x.R4=function(){this.player.getPresentingPlayerType()!==3&&XE(this,2E3)};
g.x.getPlayerType=function(){if(this.player.getPresentingPlayerType()===8)return 1};
g.x.getVideoData=function(){return this.player.getVideoData(this.getPlayerType())};
g.x.bL=function(r){switch(r){case 4:case 3:return!1}return!0};
g.x.W2=function(r,l,U){r={trigger:r,reason:l};U&&(r.serializedServerContext=U.additionalLoggingData);g.xC("heartbeatActionPlayerTransitioned",r)};
g.x.Lx=function(r){var l="LICENSE",U=ZBC(r);if(U)return U.reason||g.SU[l]||"";if(r=r.match(Rlf))if(r=Number(r[1]))l=(l=u98[r.toString()])?l:"LICENSE";return g.SU[l]||""};
g.x.IW=function(){return!!this.offlineSlate&&this.offlineSlate.H5};
var Rlf=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.ZR("heartbeat",siR);})(_yt_player);
